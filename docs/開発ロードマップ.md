# MAGISYSTEM 開発ロードマップ（改訂版）

## 概要
MAGISYSTEMをTypeScriptベースの魔力システム中心のMODへと再構築する開発計画。
熱発電機と電気炉を削除し、魔力を中心としたゲームプレイに特化する。

## 実装済み機能（一部削除予定）
- ✅ 電力（MF）システム → 魔力との連携に再構築
- ✅ ケーブルによるエネルギー輸送 → 維持
- ✅ アイテムパイプシステム → 維持
- ❌ 熱発電機 → **削除予定**
- ❌ 電気炉 → **削除予定**
- ✅ バッテリー → 魔力蓄積機に置き換え検討
- ✅ データ永続化（Dynamic Properties） → 維持
- ✅ 基本ツール（レンチ、チョーク） → 維持
- ✅ 魔法陣ブロックと検証システム → 効果実装予定

## フェーズ1: TypeScript移行とクリーンアップ（2週間）

### 1.1 TypeScript環境構築
- [ ] TypeScript開発環境のセットアップ
- [ ] tsconfig.json作成
- [ ] ビルドスクリプト作成（watch mode対応）
- [ ] 型定義ファイルの追加（@minecraft/server等）

### 1.2 既存コードのTypeScript化
- [ ] main.ts への移行
- [ ] エネルギーシステムのTypeScript化
- [ ] アイテム輸送システムのTypeScript化
- [ ] 各種ユーティリティのTypeScript化
- [ ] 型定義とインターフェースの整備

### 1.3 不要機能の削除
- [ ] 熱発電機関連コードの削除
- [ ] 電気炉関連コードの削除
- [ ] 関連するブロック/アイテム/レシピの削除
- [ ] リソースパックから不要なアセット削除

## フェーズ2: 魔力システム基盤（3週間）

### 2.1 魔力コアシステム
- [ ] MagicPowerManager クラス（TypeScript）
- [ ] プレイヤー魔力データ型定義
- [ ] 4属性魔力エンティティ（火・水・空・土）
- [ ] 魔力容量システム（基本100、拡張可能）
- [ ] 魔力獲得インターフェース

### 2.2 魔法陣システム改修
- [ ] MagicCircleSystem クラス（TypeScript）
- [ ] 効果実行エンジン
- [ ] 属性別魔力生成ロジック
- [ ] 魔力消費計算
- [ ] クールダウン管理

### 2.3 魔力蓄積機（バッテリー置き換え）
- [ ] MagicAccumulator ブロック（4属性×4段階）
- [ ] 魔力ストレージインターフェース
- [ ] UI実装（魔力量表示）
- [ ] 既存バッテリーからの移行パス

## フェーズ3: 魔力発電・変換（2週間）

### 3.1 魔力による発電
- [ ] 魔法陣ベースの発電システム
- [ ] 雷属性魔法陣 → MFエネルギー変換
- [ ] 変換効率システム
- [ ] ビジュアルエフェクト

### 3.2 エネルギー統合
- [ ] 魔力 ⇔ MF 相互変換システム
- [ ] 変換レート設定
- [ ] エネルギーバランサー
- [ ] 統合エネルギーUI

## フェーズ4: 魔力輸送システム（2週間）

### 4.1 魔力ベイン（新規輸送システム）
- [ ] MagicVein クラス（BaseTransportSystemを継承）
- [ ] 属性別輸送効率
- [ ] 距離減衰システム
- [ ] ビジュアルエフェクト（属性別パーティクル）

### 4.2 既存システムとの統合
- [ ] アイテムパイプとの相互作用
- [ ] ケーブルシステムとの共存
- [ ] 統合ネットワーク管理

## フェーズ5: 魔法装備・ツール（2週間）

### 5.1 魔法装備
- [ ] ワンド（4段階、TypeScript実装）
- [ ] 魔導帽子（容量拡張）
- [ ] 魔導マント（獲得ボーナス）
- [ ] 装備効果システム

### 5.2 高度なツール
- [ ] データカード（魔法陣保存）
- [ ] 魔法陣解析装置
- [ ] 属性検出器
- [ ] 魔力計測器

## フェーズ6: 自動化と生産（2週間）

### 6.1 魔法ベースの生産
- [ ] 魔法陣によるアイテム変換
- [ ] 分解・合成魔法陣
- [ ] 属性付与システム
- [ ] レシピ管理システム（TypeScript）

### 6.2 自動魔法装置
- [ ] 魔法出力装置（データカード対応）
- [ ] 自動詠唱システム
- [ ] 魔力効率化装置
- [ ] 連鎖魔法処理

## フェーズ7: コンテンツ拡充（2週間）

### 7.1 魔力獲得コンテンツ
- [ ] 魔力回復作物
- [ ] 魔力の泉（構造物）
- [ ] 瞑想システム（魔力回復）
- [ ] 属性祭壇

### 7.2 魔法効果
- [ ] 戦闘魔法（ダメージ、デバフ）
- [ ] 支援魔法（回復、バフ）
- [ ] 環境魔法（天候、時間）
- [ ] 移動魔法（テレポート、飛行）

## フェーズ8: 最適化・品質保証（1週間）

### 8.1 TypeScript最適化
- [ ] 型安全性の確認
- [ ] パフォーマンスプロファイリング
- [ ] メモリリーク対策
- [ ] ビルド最適化

### 8.2 テストとドキュメント
- [ ] ユニットテスト作成
- [ ] 統合テスト
- [ ] TypeScript APIドキュメント
- [ ] プレイヤーガイド更新

## 技術スタック

### 必須
- Minecraft Bedrock 1.21.59+
- TypeScript 5.0+
- @minecraft/server v1.19.0（現行維持）
- Node.js 18+（ビルド環境）

### 開発ツール
- VS Code + TypeScript拡張
- ts-node（開発用）
- nodemon（ファイル監視）
- ESLint + Prettier

## 移行戦略

### TypeScript移行手順
1. 新規ファイルは全てTypeScriptで作成
2. 既存ファイルは機能単位で段階的に移行
3. 型定義は厳格に（strictモード使用）
4. ビルドプロセスの自動化

### 削除する機能
- 熱発電機（thermal_generator）
- 電気炉（electric_furnace）
- 関連レシピ・テクスチャ
- 不要になったコード

## 成功指標

- TypeScriptによる型安全性100%
- 魔力システムが中心的なゲームプレイ要素
- ビルド時間3秒以内
- 実行時エラー0件
- 開発効率の向上（IDE補完活用）

---

総開発期間: 約3ヶ月
優先度: TypeScript移行 > 魔力システム > 既存機能削除 > 新機能追加